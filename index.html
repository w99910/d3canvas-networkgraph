<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>D3CanvasNetworkgraph</title>
</head>

<body>
    <div id="app" style="width: 100vw;height: 100vh;"></div>
    <script src="dist/d3canvas-networkgraph.es.js" type="module"></script>
    <script type="module">
        import D3CanvasNetworkgraph from 'dist/d3canvas-networkgraph.es.js'
        const generateDummyData = (totalNodes, totalLinks, length = 10) => {
            let tnodes = [];
            let links = [];

            const generateLink = () => {
                let sourceNode = parseInt(Math.random() * totalNodes)
                let targetNode = parseInt(Math.random() * totalNodes);
                if (links.filter((link) => (link.source === sourceNode && link.target === targetNode) || (link.source === targetNode && link.target === sourceNode)).length > 0) {
                    return null;
                }
                if (!tnodes.includes(sourceNode)) {
                    tnodes.push(sourceNode);
                }
                if (!tnodes.includes(targetNode)) {
                    tnodes.push(targetNode)
                }
                return { source: sourceNode, target: targetNode, value: parseInt(1 + Math.random() * length) }
            }

            for (let i = 0; i <= totalLinks - 1; i++) {
                let link = null;
                while (true) {
                    link = generateLink();
                    if (link) {
                        break;
                    }
                }
                links.push(link)
            }

            let nodes = [];
            for (let i = 0; i <= tnodes.length - 1; i++) {
                nodes.push({
                    id: tnodes[i]
                });
            }

            return { nodes: nodes, links: links }
        }


        D3CanvasNetworkgraph(generateDummyData(100, 100), {
            sticky: true,
            drag: true,
            node: {
                stroke: '#F49FBC',
                strokeWidth: 1,
                radius: 20,
                tooltip: (node) => `asdf sdfwerjkjl12 3123joiup ${node.id}`,
            }
        })


    </script>
</body>

</html>